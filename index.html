<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŒ¨ë°€ë¦¬ íŠ¸ë˜ë¸” ë§µ - ì•„ì´ì™€ í•¨ê»˜í•˜ëŠ” ì—¬í–‰</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header h1 {
            color: #333;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header h1::before {
            content: "ğŸ—ºï¸";
            font-size: 2rem;
        }

        .container {
            display: flex;
            height: calc(100vh - 80px);
            gap: 1rem;
            padding: 1rem;
        }

        .sidebar {
            width: 300px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
        }

        .filter-section {
            margin-bottom: 2rem;
        }

        .filter-section h3 {
            color: #333;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            color: #666;
        }

        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: transparent;
        }

        .places-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .place-card {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid #667eea;
        }

        .place-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .place-card h4 {
            color: #333;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .place-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-bottom: 0.5rem;
        }

        .tag {
            background: #f0f0f0;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            color: #666;
        }

        .place-info {
            font-size: 0.8rem;
            color: #777;
        }

        .map-container {
            flex: 1;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .map {
            width: 100%;
            height: 100%;
            border-radius: 15px;
            overflow: hidden;
        }

        /* ì»¤ìŠ¤í…€ ë§ˆì»¤ ìŠ¤íƒ€ì¼ */
        .custom-marker {
            width: 35px;
            height: 35px;
            background: white;
            border: 3px solid #667eea;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .custom-marker:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        .custom-marker.playground { border-color: #ff6b6b; }
        .custom-marker.zoo { border-color: #4ecdc4; }
        .custom-marker.museum { border-color: #45b7d1; }
        .custom-marker.restaurant { border-color: #f9ca24; }
        .custom-marker.park { border-color: #6c5ce7; }
        .custom-marker.aquarium { border-color: #00b894; }
        .custom-marker.nature { border-color: #a29bfe; }
        .custom-marker.hotel { border-color: #fd79a8; }

        .floating-info {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            max-width: 250px;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                height: auto;
            }
            .sidebar {
                width: 100%;
                order: 2;
            }
            .map-container {
                height: 400px;
                order: 1;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>íŒ¨ë°€ë¦¬ íŠ¸ë˜ë¸” ë§µ</h1>
    </header>

    <div class="container">
        <aside class="sidebar">
            <div class="filter-section">
                <h3>ğŸ¯ ì¹´í…Œê³ ë¦¬ í•„í„°</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-category="all">ì „ì²´</button>
                    <button class="filter-btn" data-category="playground">ë†€ì´í„°</button>
                    <button class="filter-btn" data-category="museum">ë°•ë¬¼ê´€</button>
                    <button class="filter-btn" data-category="restaurant">ì‹ë‹¹</button>
                    <button class="filter-btn" data-category="hotel">ìˆ™ë°•</button>
                    <button class="filter-btn" data-category="nature">ìì—°</button>
                </div>
            </div>

            <div class="filter-section">
                <h3>ğŸ‘¶ ì—°ë ¹ëŒ€</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-age="all">ì „ì²´</button>
                    <button class="filter-btn" data-age="infant">ìœ ì•„ (0-3ì„¸)</button>
                    <button class="filter-btn" data-age="child">ì–´ë¦°ì´ (4-12ì„¸)</button>
                    <button class="filter-btn" data-age="teen">ì²­ì†Œë…„ (13-18ì„¸)</button>
                </div>
            </div>

            <div class="places-list" id="placesList">
                <!-- ì¥ì†Œ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </aside>

        <main class="map-container">
            <div class="map" id="map">
                <!-- Leaflet ì§€ë„ê°€ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
            </div>

            <div class="floating-info" id="floatingInfo" style="display: none;">
                <h4 id="infoTitle"></h4>
                <p id="infoDescription"></p>
                <div id="infoTags"></div>
            </div>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script>
        // ì§€ë„ ì´ˆê¸°í™” (ì„œìš¸ ì¤‘ì‹¬)
        const map = L.map('map').setView([37.5665, 126.9780], 11);

        // OpenStreetMap íƒ€ì¼ ë ˆì´ì–´ ì¶”ê°€
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors',
            maxZoom: 19
        }).addTo(map);

        // ê°€ì¡± ì—¬í–‰ì§€ ë°ì´í„° (ì‹¤ì œ ì¢Œí‘œ í¬í•¨)
        const places = [
            {
                id: 'seoul-playground',
                name: 'ì„œìš¸ìˆ² ë†€ì´í„°',
                category: 'playground',
                ageGroup: ['infant', 'child'],
                description: 'ë„“ì€ ì”ë””ë°­ê³¼ ë‹¤ì–‘í•œ ë†€ì´ì‹œì„¤ì´ ìˆëŠ” ë„ì‹¬ ì† ìì—° ë†€ì´ê³µê°„',
                tags: ['ë¬´ë£Œ', 'ì£¼ì°¨ê°€ëŠ¥', 'í”¼í¬ë‹‰', 'ìì—°ì²´í—˜'],
                rating: 4.5,
                lat: 37.5447,
                lng: 127.0375,
                icon: 'ğŸ '
            },
            {
                id: 'seoul-zoo',
                name: 'ì„œìš¸ëŒ€ê³µì› ë™ë¬¼ì›',
                category: 'nature',
                ageGroup: ['infant', 'child', 'teen'],
                description: 'ë‹¤ì–‘í•œ ë™ë¬¼ë“¤ì„ ë§Œë‚  ìˆ˜ ìˆëŠ” ëŒ€í˜• ë™ë¬¼ì›, ìŠ¤ì¹´ì´ë¦¬í”„íŠ¸ íƒ‘ìŠ¹ ê°€ëŠ¥',
                tags: ['ë™ë¬¼ì²´í—˜', 'ìŠ¤ì¹´ì´ë¦¬í”„íŠ¸', 'êµìœ¡ì ', 'í•˜ë£¨ì¢…ì¼'],
                rating: 4.7,
                lat: 37.4349,
                lng: 127.0089,
                icon: 'ğŸ¦'
            },
            {
                id: 'science-museum',
                name: 'êµ­ë¦½ê³¼ì²œê³¼í•™ê´€',
                category: 'museum',
                ageGroup: ['child', 'teen'],
                description: 'ì²´í—˜í˜• ê³¼í•™ ì „ì‹œì™€ ì²œì²´ê´€ì¸¡ì´ ê°€ëŠ¥í•œ êµ­ë‚´ ìµœëŒ€ ê³¼í•™ê´€',
                tags: ['êµìœ¡ì ', 'ì²´í—˜í™œë™', 'ì‹¤ë‚´í™œë™', 'ìš°ì²œì‹œì¢‹ìŒ'],
                rating: 4.6,
                lat: 37.4344,
                lng: 127.0155,
                icon: 'ğŸ”¬'
            },
            {
                id: 'family-restaurant',
                name: 'í‚¤ì¦ˆì¹´í˜ ë ˆìŠ¤í† ë‘',
                category: 'restaurant',
                ageGroup: ['infant', 'child'],
                description: 'ì•„ì´ë“¤ì´ ë†€ ìˆ˜ ìˆëŠ” ë†€ì´ê³µê°„ì´ ìˆëŠ” ê°€ì¡± ì¹œí™”ì  ë ˆìŠ¤í† ë‘',
                tags: ['ë†€ì´ì‹œì„¤', 'í‚¤ì¦ˆë©”ë‰´', 'ì‹¤ë‚´', 'ìƒì¼íŒŒí‹°'],
                rating: 4.3,
                lat: 37.5133,
                lng: 127.0592,
                icon: 'ğŸ½ï¸'
            },
            {
                id: 'han-river',
                name: 'í•œê°•ê³µì› (ì—¬ì˜ë„)',
                category: 'nature',
                ageGroup: ['infant', 'child', 'teen'],
                description: 'ìì „ê±° íƒ€ê¸°, í”¼í¬ë‹‰, ìˆ˜ìƒìŠ¤í¬ì¸ ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ì„œìš¸ì˜ ëŒ€í‘œ ê³µì›',
                tags: ['ìì „ê±°', 'í”¼í¬ë‹‰', 'ìˆ˜ìƒìŠ¤í¬ì¸ ', 'ì•¼ê²½'],
                rating: 4.4,
                lat: 37.5264,
                lng: 126.9342,
                icon: 'ğŸŒ³'
            },
            {
                id: 'coex-aquarium',
                name: 'COEX ì•„ì¿ ì•„ë¦¬ì›€',
                ageGroup: ['infant', 'child', 'teen'],
                category: 'museum',
                description: 'ë„ì‹¬ ì† ë°”ë‹¤ ì„¸ê³„, ë‹¤ì–‘í•œ í•´ì–‘ìƒë¬¼ ê´€ëŒ ë° ì²´í—˜ í”„ë¡œê·¸ë¨',
                tags: ['ì‹¤ë‚´í™œë™', 'í•´ì–‘ìƒë¬¼', 'ì²´í—˜í”„ë¡œê·¸ë¨', 'ìš°ì²œì‹œì¢‹ìŒ'],
                rating: 4.5,
                lat: 37.5125,
                lng: 127.0590,
                icon: 'ğŸ '
            },
            {
                id: 'banpo-rainbow',
                name: 'ë°˜í¬ ë¬´ì§€ê°œë¶„ìˆ˜',
                category: 'nature',
                ageGroup: ['infant', 'child', 'teen'],
                description: 'ìŒì•…ê³¼ í•¨ê»˜í•˜ëŠ” ì•„ë¦„ë‹¤ìš´ ë¶„ìˆ˜ì‡¼, ì—¬ë¦„ì²  ë¬¼ë†€ì´ ê°€ëŠ¥',
                tags: ['ë¶„ìˆ˜ì‡¼', 'ì•¼ê²½', 'ë¬¼ë†€ì´', 'ê³„ì ˆí•œì •'],
                rating: 4.2,
                lat: 37.5087,
                lng: 126.9966,
                icon: 'ğŸŒˆ'
            },
            {
                id: 'family-hotel',
                name: 'ì ì‹¤ íŒ¨ë°€ë¦¬ í˜¸í…”',
                category: 'hotel',
                ageGroup: ['infant', 'child', 'teen'],
                description: 'í‚¤ì¦ˆ í´ëŸ½ê³¼ ìˆ˜ì˜ì¥ì´ ìˆëŠ” ê°€ì¡± ì „ìš© í˜¸í…”',
                tags: ['í‚¤ì¦ˆí´ëŸ½', 'ìˆ˜ì˜ì¥', 'íŒ¨ë°€ë¦¬ë£¸', 'ì¡°ì‹ë·”í˜'],
                rating: 4.6,
                lat: 37.5114,
                lng: 127.0982,
                icon: 'ğŸ¨'
            }
        ];

        let currentFilters = {
            category: 'all',
            age: 'all'
        };

        let markers = [];

        // ì»¤ìŠ¤í…€ ë§ˆì»¤ ìƒì„± í•¨ìˆ˜
        function createCustomMarker(place) {
            const markerElement = L.divIcon({
                className: 'custom-div-icon',
                html: `<div class="custom-marker ${place.category}">${place.icon}</div>`,
                iconSize: [35, 35],
                iconAnchor: [17, 35]
            });
            
            const marker = L.marker([place.lat, place.lng], { icon: markerElement })
                .bindPopup(`
                    <div style="min-width: 200px;">
                        <h4 style="margin: 0 0 8px 0; color: #333;">${place.name}</h4>
                        <p style="margin: 0 0 8px 0; font-size: 0.9rem; color: #666;">${place.description}</p>
                        <div style="margin-bottom: 8px;">
                            ${place.tags.map(tag => `<span style="background: #f0f0f0; padding: 2px 6px; border-radius: 10px; font-size: 0.7rem; margin-right: 4px;">${tag}</span>`).join('')}
                        </div>
                        <div style="font-size: 0.8rem; color: #777;">
                            â­ ${place.rating} | ${getAgeGroupText(place.ageGroup)}
                        </div>
                    </div>
                `);
            
            marker.placeData = place;
            return marker;
        }

        // ì§€ë„ì— ë§ˆì»¤ ì¶”ê°€
        function addMarkersToMap(filteredPlaces) {
            // ê¸°ì¡´ ë§ˆì»¤ ì œê±°
            markers.forEach(marker => map.removeLayer(marker));
            markers = [];

            // ìƒˆ ë§ˆì»¤ ì¶”ê°€
            filteredPlaces.forEach(place => {
                const marker = createCustomMarker(place);
                markers.push(marker);
                marker.addTo(map);
                
                // ë§ˆì»¤ í´ë¦­ ì´ë²¤íŠ¸
                marker.on('click', function() {
                    showPlaceInfo(place);
                });
            });
        }

        // í•„í„° ë²„íŠ¼ ì´ë²¤íŠ¸
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const filterType = this.dataset.category ? 'category' : 'age';
                const filterValue = this.dataset.category || this.dataset.age;
                
                // ê°™ì€ íƒ€ì…ì˜ ë‹¤ë¥¸ ë²„íŠ¼ë“¤ ë¹„í™œì„±í™”
                document.querySelectorAll(`[data-${filterType}]`).forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                currentFilters[filterType] = filterValue;
                updateDisplay();
            });
        });

        // ë§ˆì»¤ í´ë¦­ ì´ë²¤íŠ¸
        document.querySelectorAll('.marker').forEach(marker => {
            marker.addEventListener('click', function() {
                const placeId = this.dataset.place;
                const place = places.find(p => p.id === placeId);
                showPlaceInfo(place);
            });
        });

        function updateDisplay() {
            const filteredPlaces = places.filter(place => {
                const categoryMatch = currentFilters.category === 'all' || place.category === currentFilters.category;
                const ageMatch = currentFilters.age === 'all' || place.ageGroup.includes(currentFilters.age);
                return categoryMatch && ageMatch;
            });

            // ì‚¬ì´ë“œë°” ëª©ë¡ ì—…ë°ì´íŠ¸
            updatePlacesList(filteredPlaces);
            
            // ì§€ë„ ë§ˆì»¤ ì—…ë°ì´íŠ¸
            addMarkersToMap(filteredPlaces);
        }

        function updatePlacesList(filteredPlaces) {
            const placesList = document.getElementById('placesList');
            placesList.innerHTML = filteredPlaces.map(place => `
                <div class="place-card" onclick="focusOnPlace('${place.id}')">
                    <h4>${place.name}</h4>
                    <div class="place-tags">
                        ${place.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                    <div class="place-info">
                        â­ ${place.rating} | ${getAgeGroupText(place.ageGroup)}
                    </div>
                </div>
            `).join('');
        }

        function updateMapMarkers(filteredPlaces) {
            // ì´ í•¨ìˆ˜ëŠ” ì´ì œ addMarkersToMapìœ¼ë¡œ ëŒ€ì²´ë¨
        }

        function focusOnPlace(placeId) {
            const place = places.find(p => p.id === placeId);
            if (place) {
                // ì§€ë„ ì¤‘ì‹¬ì„ í•´ë‹¹ ì¥ì†Œë¡œ ì´ë™
                map.setView([place.lat, place.lng], 15);
                
                // í•´ë‹¹ ë§ˆì»¤ì˜ íŒì—… ì—´ê¸°
                const marker = markers.find(m => m.placeData && m.placeData.id === placeId);
                if (marker) {
                    marker.openPopup();
                }
                
                showPlaceInfo(place);
            }
        }

        function showPlaceInfo(place) {
            const floatingInfo = document.getElementById('floatingInfo');
            const infoTitle = document.getElementById('infoTitle');
            const infoDescription = document.getElementById('infoDescription');
            const infoTags = document.getElementById('infoTags');

            infoTitle.textContent = place.name;
            infoDescription.textContent = place.description;
            infoTags.innerHTML = place.tags.map(tag => `<span class="tag">${tag}</span>`).join('');

            floatingInfo.style.display = 'block';

            // 3ì´ˆ í›„ ìë™ìœ¼ë¡œ ìˆ¨ê¹€
            setTimeout(() => {
                floatingInfo.style.display = 'none';
            }, 5000);
        }

        function getAgeGroupText(ageGroups) {
            const ageTexts = {
                'infant': 'ìœ ì•„',
                'child': 'ì–´ë¦°ì´',
                'teen': 'ì²­ì†Œë…„'
            };
            return ageGroups.map(age => ageTexts[age]).join(', ');
        }

        // ì´ˆê¸° í™”ë©´ ë¡œë“œ
        updateDisplay();

        // í”Œë¡œíŒ… ì •ë³´ì°½ í´ë¦­ì‹œ ë‹«ê¸°
        document.getElementById('floatingInfo').addEventListener('click', function() {
            this.style.display = 'none';
        });
    </script>
</body>
</html>